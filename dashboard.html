<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard - GIAO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <header class="navbar navbar-expand-lg navbar-dark bg-danger px-4">
    <a class="navbar-brand fw-bold text-white" href="#">Sistema GIAO</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto"></ul>
      <span class="navbar-text me-3 text-white" id="nombre-usuario">Usuario</span>
      <button class="btn btn-light btn-sm" onclick="cerrarSesion()">Cerrar sesión</button>
    </div>
  </header>

  <main class="container mt-5">
    <div class="text-center mb-4">
      <h2 class="text-danger fw-bold" id="bienvenida"></h2>
      <p class="lead">Seleccione una opción:</p>
    </div>

    <div class="row justify-content-center text-center g-4" id="contenedor-opciones">
      <!-- Botones se agregan dinámicamente -->
    </div>

    <div class="text-center mt-5" id="vacaciones-container" style="display: none;">
      <h5>Días de Vacaciones disponibles: <span class="badge bg-danger">10</span></h5>
    </div>
  </main>

  <script>
    const rol = localStorage.getItem("rol");
    const nombre = localStorage.getItem("nombre") || "Usuario";

    document.getElementById("nombre-usuario").textContent = nombre;
    document.getElementById("bienvenida").textContent = `Bienvenido al sistema GIAO, ${nombre}`;

    const contenedor = document.getElementById("contenedor-opciones");
    const vacacionesContainer = document.getElementById("vacaciones-container");

    const botones = {
      usuario: [
        { texto: "🕒<br>Asistencia", enlace: "asistencia.html" },
        { texto: "📝<br>Permisos / Incapacidad", enlace: "permisos.html" },
        { texto: "🌴<br>Vacaciones", enlace: "vacaciones.html" }
      ],
      userdev: [
        { texto: "🕒<br>Asistencia", enlace: "asistencia.html" },
        { texto: "📝<br>Permisos / Incapacidad", enlace: "permisos.html" },
        { texto: "🌴<br>Vacaciones", enlace: "vacaciones.html" },
        { texto: "💻<br>Mis Proyectos", enlace: "proyectos_usuario.html" }
      ],
      jefe: [
        { texto: "📥<br>Solicitudes Pendientes", enlace: "solicitudes_pendientes.html" },
        { texto: "👥<br>Asistencia del Equipo", enlace: "asistencia_equipo.html" },
        { texto: "📊<br>Resumen del Equipo", enlace: "resumen_equipo.html" }
        // El botón de proyectos se agrega dinámicamente si aplica
      ],
      admin: [
        { texto: "👥<br>Gestión de Usuarios", enlace: "gestion_usuarios.html" },
        { texto: "🔐<br>Roles y Permisos", enlace: "roles_permisos.html" },
        { texto: "🧾<br>Mantenimientos", enlace: "mantenimientos.html" },
        { texto: "📊<br>Reportes Generales", enlace: "reportes_generales.html" }
      ]
    };

    // Agregar botones según rol
    if (botones[rol]) {
      botones[rol].forEach(btn => {
        const div = document.createElement("div");
        div.className = "col-md-3";
        div.innerHTML = `
          <a href="${btn.enlace}" class="btn btn-outline-danger w-100 py-4">${btn.texto}</a>
        `;
        contenedor.appendChild(div);
      });
    }

    // Agregar botón de proyectos solo si jefe de desarrollo
    if (rol === "jefe" && (nombre.toLowerCase().includes("desarrollo") || nombre.toLowerCase().includes("roger"))) {
      const div = document.createElement("div");
      div.className = "col-md-3";
      div.innerHTML = `
        <a href="proyectos_equipo.html" class="btn btn-outline-danger w-100 py-4">🗂️<br>Proyectos en Curso</a>
      `;
      contenedor.appendChild(div);
    }

    // Mostrar vacaciones solo a usuarios normales
    if (rol === "usuario" || rol === "userdev") {
      vacacionesContainer.style.display = "block";
    }

    function cerrarSesion() {
      localStorage.clear();
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
